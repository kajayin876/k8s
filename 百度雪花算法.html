<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.7.24 (476601)"/><meta name="altitude" content="7.171018600463867"/><meta name="author" content="k1mcu740"/><meta name="created" content="2023-01-02 07:01:09 +0000"/><meta name="latitude" content="30.99699401855469"/><meta name="longitude" content="121.2897241439681"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2023-01-02 07:03:35 +0000"/><title>百度雪花算法</title></head><body><h2 style="font-size: 16pt; text-align: left; text-indent: 0px;"><span style="font-size: 16pt; text-indent: 0px; font-weight: bold; line-height: 18.133333px;">百度</span><span style="font-size: 16pt; text-indent: 0px; line-height: 18.133333px;">uid-generator </span><span style="font-size: 16pt; text-indent: 0px; font-weight: bold; line-height: 18.133333px;">分布式id生成系统</span></h2><div style="text-align: left; text-indent: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px; font-size: 12pt; color: rgb(36, 41, 47); font-family: -apple-system, -apple-system, -apple-system, -apple-system;-en-paragraph:true;">介绍：UidGenerator是Java实现的, 基于</span><a href="https://github.com/twitter/snowflake" style="text-indent: 0px; font-size: 12pt; font-family: -apple-system, -apple-system, -apple-system, -apple-system;-en-paragraph:true;">Snowflake</a><span style="text-indent: 0px; font-size: 12pt; color: rgb(36, 41, 47); font-family: -apple-system, -apple-system, -apple-system, -apple-system;-en-paragraph:true;">算法的唯一ID生成器。UidGenerator以组件形式工作在应用项目中, 支持自定义workerId位数和初始化策略, 从而适用于</span><a href="https://www.docker.com/" style="text-indent: 0px; font-size: 12pt; font-family: -apple-system, -apple-system, -apple-system, -apple-system;-en-paragraph:true;">docker</a><span style="text-indent: 0px; font-size: 12pt; color: rgb(36, 41, 47); font-family: -apple-system, -apple-system, -apple-system, -apple-system;-en-paragraph:true;">等虚拟化环境下实例自动重启、漂移等场景。 在实现上, UidGenerator通过借用未来时间来解决sequence天然存在的并发限制; 采用RingBuffer来缓存已生成的UID, 并行化UID的生产和消费, 同时对CacheLine补齐，避免了由RingBuffer带来的硬件级「伪共享」</span></div><h3 style="font-size: 14pt; text-align: left; text-indent: 0px;"><span style="font-size: 14pt; text-indent: 0px; color: rgb(36, 41, 47); font-family: -apple-system, -apple-system, -apple-system, -apple-system; font-weight: bold; line-height: 15.866666px;">2.5.1 优点</span></h3><ol style="list-style-type: decimal;"><li><div style="text-align: left; text-indent: 0px;"><span style="text-indent: 0px; font-size: 12pt; color: rgb(102, 102, 102); font-family: Arial, Arial, Arial, Arial;">UidGenerator通过借用未来时间来解决sequence天然存在的并发限制；</span></div></li><li><div style="text-align: left; text-indent: 0px;"><span style="text-indent: 0px; font-size: 12pt; color: rgb(102, 102, 102); font-family: Arial, Arial, Arial, Arial;"> 采用RingBuffer来缓存已生成的UID, 并行化UID的生产和消费；</span></div></li><li><div style="text-align: left; text-indent: 0px;"><span style="text-indent: 0px; font-size: 12pt; color: rgb(102, 102, 102); font-family: Arial, Arial, Arial, Arial;">同时对CacheLine补齐，避免了由RingBuffer带来的硬件级「伪共享」问题。</span></div></li></ol><div style="text-align: left; text-indent: 0px;"><span style="color: rgb(102, 102, 102); font-family: Arial;"><b><font style="font-size: 18px;">2.5.2 缺点</font></b></span></div><ol><li><div style="text-align: left; text-indent: 0px;"><span style="color: rgb(102, 102, 102); font-family: Arial;"><font style="font-weight: bold; font-size: 18px;">   </font></span><span style="text-indent: 0px; font-size: 12pt; color: rgb(102, 102, 102); font-family: Arial, Arial, Arial, Arial;">UidGenerator 需要对工程以sdk方式进行集成，增加程序复杂性。并且</span><span style="text-indent: 0px; font-size: 12pt; color: rgb(102, 102, 102); font-family: Arial, Arial, Arial, Arial;">RingBuffer参数设置比较复杂，对开发不友好</span><br/></div></li></ol><div/></body></html>