<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.7.24 (476601)"/><meta name="altitude" content="6.453425407409668"/><meta name="author" content="k1mcu740"/><meta name="created" content="2023-01-02 07:06:31 +0000"/><meta name="latitude" content="30.99697875976562"/><meta name="longitude" content="121.2892532692876"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2023-01-02 07:06:55 +0000"/><title>mongodb 雪花算法</title></head><body><h2 style="font-size: 16pt; text-align: left; text-indent: 0px;"><span style="font-size: 16pt; text-indent: 0px; font-weight: bold; line-height: 18.133333px;">MongoDB</span></h2><h3 style="font-size: 14pt; text-align: left; text-indent: 0px;"><span style="font-size: 14pt; text-indent: 0px; font-weight: bold; line-height: 15.866666px;">1. 方案</span></h3><div style="text-align: left; text-indent: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px;-en-paragraph:true;">MongoDB 使用 ObjectIds 作为每个文档的 _id 字段的默认值，该字段在创建任何文档时生成。</span></div><div style="text-align: left; text-indent: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px;-en-paragraph:true;">MongoDB 对象 ID 是 12 字节（96 位）的十六进制整数，以随机值开头，由 4 字节的纪元时间戳（以秒为单位）、3 字节的机器标识、2 字节的进程 ID 和 3-字节计数器。</span></div><div style="text-align: left; text-indent: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px;-en-paragraph:true;">这是一个比之前的 128 位版本更小的 UUID。但是，大小比我们通常在单个 MySQL 自动增量列（64 位数字值）中找到的要大。</span></div><h3 style="font-size: 14pt; text-align: left; text-indent: 0px;"><span style="font-size: 14pt; text-indent: 0px; font-weight: bold; line-height: 15.866666px;">2.优点</span></h3><div style="text-align: left; text-indent: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="text-indent: 0px;-en-paragraph:true;">优点:</span></div><ol style="list-style-type: decimal;"><li><div style="text-align: left; text-indent: 0px;"><span style="text-indent: 0px;">每个应用程序线程单独创建 ID，从而减少 ID 创建失败点和争用。如果 ID 的第一个组件是时间戳，则 ID 保持时间可排序。</span></div></li><li><div style="text-align: left; text-indent: 0px;"><span style="text-indent: 0px;">为了建立足够的唯一性保证，通常需要额外的存储空间（96 位或更多）。一些 UUID 类型没有自然顺序并且是随机的。</span></div></li></ol><div/></body></html>